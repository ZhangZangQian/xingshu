import {
  ConfigDisplayItem,
  ConfigDisplayStyle,
  ConfigValidation,
  ConfigEditorType,
  OptionsSource,
  ActionCardGroup,
  ActionCardDefinition,
  ConfigOption
} from '../models/WorkflowModels';

const timeStyle1: ConfigDisplayStyle = { backgroundColor: '#FFF0D6', textColor: '#FF9500' };
const timeStyle2: ConfigDisplayStyle = { backgroundColor: '#FFF0D6', textColor: '#FF9500' };
const timeValidation: ConfigValidation = { type: 'string', required: true };

const weatherStyle: ConfigDisplayStyle = {
  backgroundColor: '#EFF6FF',
  textColor: '#2563EB',
  borderColor: '#BFDBFE',
  icon: '\u26C5'
};

const scriptingStyle1: ConfigDisplayStyle = {
  backgroundColor: '#FEF3C7',
  textColor: '#D97706',
  borderColor: '#FDE68A'
  // icon: '\u26C5'
};

const scriptingStyle2: ConfigDisplayStyle = {
  backgroundColor: '#F3F4F6',
  textColor: '#000000',
  borderColor: '#E5E7EB'
};

const scriptingValidation: ConfigValidation = { type: 'number', min: -100, max: 100 };

const musicStyle: ConfigDisplayStyle = {
  backgroundColor: '#FDF2F8',
  textColor: '#EC4899',
  borderColor: '#FBCFE8',
  icon: '\u{1F3B5}'
};

const wifiStyle: ConfigDisplayStyle = {
  backgroundColor: '#DBEAFE',
  textColor: '#2563EB',
  borderColor: '#BFDBFE',
  icon: '\u{1F503}'
};

const displayStyle: ConfigDisplayStyle = {
  backgroundColor: '#F3F4F6',
  textColor: '#374151',
  borderColor: '#E5E7EB',
  icon: '\u{1F4F1}'
};

const volumeStyle: ConfigDisplayStyle = {
  backgroundColor: '#FEF3C7',
  textColor: '#D97706',
  borderColor: '#FDE68A',
  icon: '\u{1F50A}'
};

const messageStyle: ConfigDisplayStyle = {
  backgroundColor: '#D1FAE5',
  textColor: '#059669',
  borderColor: '#A7F3D0'
};

export const CONFIG_DISPLAY_TEMPLATES: Record<string, ConfigDisplayItem[]> = {
  'time_date': [
    {
      displayType: 'button',
      label: 'At',
      configKey: 'timeType',
      style: timeStyle1,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: 'ÂÖ∑‰ΩìÊó∂Èó¥', value: 'specific' },
          { label: 'Êó•Âá∫', value: 'sunrise' },
          { label: 'Êó•ËêΩ', value: 'sunset' }
        ]
      }
    } as ConfigDisplayItem,
    {
      displayType: 'button',
      label: '7:00 AM',
      configKey: 'timeValue',
      style: timeStyle2,
      validation: timeValidation,
      editorType: 'time',
      placeholder: 'ÈÄâÊã©Êó∂Èó¥'
    } as ConfigDisplayItem,
    {
      displayType: 'button',
      label: 'Daily',
      configKey: 'repeat',
      style: timeStyle1,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: 'ÊØèÂ§©', value: 'daily' },
          { label: 'Â∑•‰ΩúÊó•', value: 'weekdays' },
          { label: 'Âë®Êú´', value: 'weekends' },
          { label: 'Ëá™ÂÆö‰πâ', value: 'custom' }
        ]
      }
    } as ConfigDisplayItem
  ],

  'weather': [
    {
      displayType: 'text',
      label: 'at',
      editorType: 'none'
    } as ConfigDisplayItem,
    {
      displayType: 'icon-tag',
      label: 'Current Location',
      configKey: 'location',
      style: weatherStyle,
      editorType: 'location'
    } as ConfigDisplayItem
  ],

  'if_else': [
    {
      displayType: 'icon-tag',
      label: 'ÈÄâÊã©ÂèòÈáè',
      configKey: 'variable',
      style: scriptingStyle1,
      editorType: 'variable',
      optionsSource: {
        type: 'context',
        contextKey: 'variables'
      },
      placeholder: 'ÈÄâÊã©ÂèòÈáè'
    } as ConfigDisplayItem,
    {
      displayType: 'tag',
      label: 'Â§ß‰∫é',
      configKey: 'operator',
      style: scriptingStyle2,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: 'Â§ß‰∫é', value: '>' },
          { label: 'Â∞è‰∫é', value: '<' },
          { label: 'Á≠â‰∫é', value: '==' },
          { label: '‰∏çÁ≠â‰∫é', value: '!=' },
          { label: 'Â§ß‰∫éÁ≠â‰∫é', value: '>=' },
          { label: 'Â∞è‰∫éÁ≠â‰∫é', value: '<=' }
        ]
      }
    } as ConfigDisplayItem,
    {
      displayType: 'tag',
      label: '0',
      configKey: 'value',
      style: scriptingStyle2,
      editorType: 'number',
      validation: scriptingValidation,
      placeholder: 'ËæìÂÖ•Êï∞ÂÄº'
    } as ConfigDisplayItem
  ],

  'media': [
    {
      displayType: 'text',
      label: 'Playlist:',
      editorType: 'none'
    } as ConfigDisplayItem,
    {
      displayType: 'button',
      label: 'Morning Vibes',
      configKey: 'playlistName',
      style: musicStyle,
      editorType: 'text',
      placeholder: 'ËæìÂÖ•Ê≠åÂçïÂêçÁß∞'
    } as ConfigDisplayItem
  ],

  'wifi_bluetooth': [
    {
      displayType: 'icon-tag',
      label: 'Wi-Fi',
      configKey: 'target',
      style: wifiStyle,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: 'Wi-Fi', value: 'wifi' },
          { label: 'ËìùÁâô', value: 'bluetooth' },
          { label: '5G', value: '5g' },
          { label: 'È£ûË°åÊ®°Âºè', value: 'airplane' },
          { label: 'ÁÉ≠ÁÇπ', value: 'hotspot' }
        ]
      }
    } as ConfigDisplayItem,
    {
      displayType: 'tag',
      label: 'Toggle',
      configKey: 'action',
      style: scriptingStyle2,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: 'ÂºÄÂêØ', value: 'on' },
          { label: 'ÂÖ≥Èó≠', value: 'off' },
          { label: 'ÂàáÊç¢', value: 'toggle' }
        ]
      }
    } as ConfigDisplayItem
  ],

  'display': [
    {
      displayType: 'icon-tag',
      label: 'Brightness',
      configKey: 'type',
      style: displayStyle,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: '‰∫ÆÂ∫¶', value: 'brightness' },
          { label: 'Ê∑±Ëâ≤Ê®°Âºè', value: 'dark_mode' },
          { label: 'ÊÅØÂ±èÊòæÁ§∫', value: 'always_on' },
          { label: 'ÈîÅÂÆöÂ±èÂπï', value: 'lock_screen' }
        ]
      }
    } as ConfigDisplayItem,
    {
      displayType: 'tag',
      label: '50%',
      configKey: 'value',
      style: scriptingStyle2,
      editorType: 'number',
      placeholder: '0-100'
    } as ConfigDisplayItem
  ],

  'volume_notify': [
    {
      displayType: 'icon-tag',
      label: 'Media Volume',
      configKey: 'type',
      style: volumeStyle,
      editorType: 'select',
      optionsSource: {
        type: 'static',
        staticOptions: [
          { label: 'ÈìÉÂ£∞Èü≥Èáè', value: 'ringtone' },
          { label: 'Â™í‰ΩìÈü≥Èáè', value: 'media' },
          { label: 'ÈúáÂä®Ê®°Âºè', value: 'vibration' },
          { label: 'ÊúóËØªÊñáÊú¨', value: 'tts' }
        ]
      }
    } as ConfigDisplayItem,
    {
      displayType: 'tag',
      label: '30%',
      configKey: 'value',
      style: scriptingStyle2,
      editorType: 'number',
      placeholder: '0-100'
    } as ConfigDisplayItem
  ]
};

// If-Else Â§öÂç°ÁâáÁªÑÂÆö‰πâ
export const ACTION_CARD_GROUPS: Record<string, ActionCardGroup> = {
  'if_else': {
    groupId: 'if_else',
    groupType: 'if_else',
    cards: [
      {
        cardType: 'start',
        title: 'Â¶ÇÊûú',
        icon: '‚ûï',
        iconColor: '#F59E0B',
        configDisplay: CONFIG_DISPLAY_TEMPLATES['if_else'],
        acceptChildren: true
      },
      {
        cardType: 'middle',
        title: 'Âê¶Âàô',
        icon: '‚ûñ',
        iconColor: '#6B7280',
        acceptChildren: true
      },
      {
        cardType: 'end',
        title: 'ÁªìÊùü',
        icon: '‚¨õ',
        iconColor: '#9CA3AF',
        acceptChildren: false
      }
    ]
  },
  'repeat': {
    groupId: 'repeat',
    groupType: 'repeat',
    cards: [
      {
        cardType: 'start',
        title: 'ÈáçÂ§ç',
        icon: 'üîÅ',
        iconColor: '#8B5CF6',
        acceptChildren: true
      },
      {
        cardType: 'end',
        title: 'ÁªìÊùüÈáçÂ§ç',
        icon: '‚¨õ',
        iconColor: '#9CA3AF',
        acceptChildren: false
      }
    ]
  }
};

export function getConfigDisplayTemplate(itemId: string): ConfigDisplayItem[] | undefined {
  return CONFIG_DISPLAY_TEMPLATES[itemId];
}

export function getActionCardGroup(groupType: string): ActionCardGroup | undefined {
  return ACTION_CARD_GROUPS[groupType];
}

