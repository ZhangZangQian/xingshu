# 鸿蒙宏 - Apple APP 风格 UI 设计方案

## 一、设计原则

### 1.1 核心设计理念
- **简洁至上**：去除多余装饰，突出核心内容
- **层次清晰**：通过留白、字体大小、色彩透明度建立视觉层次
- **一致性**：统一的设计语言和交互模式
- **流畅交互**：自然的手势和过渡动画

### 1.2 Apple Design 语言应用
- **SF Pro 字体风格**：使用系统字体，字重清晰
- **圆角设计**：卡片圆角 12-16px，按钮圆角 8-10px
- **毛玻璃效果**：导航栏和浮动元素使用半透明模糊
- **微动画**：按钮点击、页面切换的流畅过渡
- **阴影深度**：通过阴影营造层次感，避免过度使用

## 二、色彩系统

### 2.1 主色调
```typescript
// 系统蓝色（Apple 标准）
PRIMARY_BLUE = '#007DFF'        // 主要操作按钮、链接
PRIMARY_BLUE_LIGHT = '#E3F2FF'  // 浅蓝背景
PRIMARY_BLUE_DARK = '#0056CC'   // 按压态
```

### 2.2 中性色
```typescript
// 文本色
TEXT_PRIMARY = '#1A1A1A'        // 主要文本
TEXT_SECONDARY = '#6E6E73'      // 次要文本
TEXT_TERTIARY = '#AEAEB2'       // 辅助文本、占位符

// 背景色
BG_PRIMARY = '#FFFFFF'          // 主要背景
BG_SECONDARY = '#F2F2F7'        // 次要背景、卡片间距
BG_TERTIARY = '#E5E5EA'         // 分隔线、三级背景

// 阴影色
SHADOW_LIGHT = 'rgba(0, 0, 0, 0.08)'   // 浅阴影
SHADOW_MEDIUM = 'rgba(0, 0, 0, 0.12)'  // 中等阴影
SHADOW_DARK = 'rgba(0, 0, 0, 0.16)'    // 深阴影
```

### 2.3 功能色
```typescript
SUCCESS = '#34C759'   // 成功、启用状态
WARNING = '#FF9500'   // 警告
DANGER = '#FF3B30'   // 删除、禁用状态
INFO = '#5AC8FA'     // 信息提示
```

## 三、字体系统

### 3.1 字体层级
```typescript
// 标题
H1_SIZE = 28px    // 页面大标题（如"我的宏"）
H1_WEIGHT = 700   // Bold

H2_SIZE = 20px    // 卡片标题
H2_WEIGHT = 600   // Semibold

H3_SIZE = 17px    // 列表项标题
H3_WEIGHT = 600   // Semibold

// 正文
BODY_SIZE = 15px    // 主要文本
BODY_WEIGHT = 400   // Regular

CAPTION_SIZE = 13px  // 次要文本、说明
CAPTION_WEIGHT = 400 // Regular

FOOTNOTE_SIZE = 11px // 辅助信息、时间戳
FOOTNOTE_WEIGHT = 400 // Regular
```

### 3.2 行高
```typescript
LINE_HEIGHT_LOOSE = 1.4   // 标题行高
LINE_HEIGHT_NORMAL = 1.3  // 正文行高
LINE_HEIGHT_TIGHT = 1.2  // 辅助文本行高
```

## 四、整体布局

### 4.1 页面结构
```
┌─────────────────────────────┐
│  顶部导航栏（CommonTopBar）  │ 44px + 状态栏 48px
├─────────────────────────────┤
│                             │
│  主内容区（Scroll）          │
│                             │
├─────────────────────────────┤
│  底部 Tab 导航栏              │ 49px + 安全区域 34px
└─────────────────────────────┘
```

### 4.2 间距规范
```typescript
// 页面边距
PAGE_PADDING_H = 16px  // 页面左右边距
PAGE_PADDING_V = 12px  // 页面上下边距

// 卡片间距
CARD_SPACING = 12px    // 卡片之间的垂直间距
CARD_PADDING = 16px    // 卡片内边距

// 元素间距
SPACING_XS = 4px       // 超小间距
SPACING_SM = 8px       // 小间距
SPACING_MD = 12px      // 中等间距
SPACING_LG = 16px      // 大间距
SPACING_XL = 24px      // 超大间距
```

## 五、组件设计

### 5.1 底部 Tab 导航栏

#### 布局
```typescript
TabBar {
  位置：页面底部
  高度：49px + 安全区域
  背景：BG_PRIMARY + 毛玻璃效果
  阴影：0 -1px 0 rgba(0,0,0,0.08)
  边框：顶部 0.5px 分隔线
}
```

#### Tab 项设计
```
┌────────────────────────────────────────────┐
│                                            │
│  📱                                      │
│  我的宏                                    │
│  (选中时：蓝色)                            │
│                                            │
└────────────────────────────────────────────┘

未选中状态：
- 图标：TEXT_TERTIARY
- 文字：TEXT_TERTIARY, FOOTNOTE_SIZE

选中状态：
- 图标：PRIMARY_BLUE
- 文字：PRIMARY_BLUE, FOOTNOTE_SIZE
```

#### Tab 列表
1. **我的宏** - `document.fill` (SF Symbols)
2. **模板** - `square.grid.2x2.fill` (SF Symbols)
3. **设置** - `gearshape.fill` (SF Symbols)

### 5.2 顶部导航栏（优化 CommonTopBar）

#### 标准样式
```typescript
TopBar {
  高度：44px + 状态栏 48px
  背景：BG_PRIMARY + 毛玻璃效果
  阴影：0 1px 0 rgba(0,0,0,0.08)（仅滚动时显示）
  按钮：
    - 取消：PRIMARY_BLUE, H3_SIZE
    - 保存：PRIMARY_BLUE, H3_SIZE, Bold
}
```

#### 大标题模式（我的宏页面）
```typescript
LargeTitleTopBar {
  状态：
    - 展开时：大标题 "我的宏" (H1_SIZE)，背景透明
    - 折叠时：小标题 "我的宏" (H2_SIZE)，背景毛玻璃

  过渡：随滚动平滑过渡（模拟 iOS Large Title）
}
```

### 5.3 宏卡片（参考 iPhone 快捷指令）

#### 布局 - 紧凑方形卡片（点击执行）
```
┌─────────────────────────────────┐
│  ┌─────┐  快小红宏    ⋯ 🔴   │  <-- 图标 + 标题 + 三圆点 + 开关
│  │ 📱  │                         │
│  └─────┘                         │
│                                 │
│  从小红书采集内容到飞书          │  <-- 描述（2行截断）
│  多维表格                         │
│                                 │
│  ⏱️ 定时 · 🔔 通知                │  <-- 触发器标签
└─────────────────────────────────┘
```

**交互说明：**
- 点击整个卡片：触发执行宏
- 点击右上角三圆点 ⋯：弹出编辑菜单（编辑、删除、复制、重命名、星标）
- 点击开关 🔴：切换启用/禁用状态

#### 紧凑模式（小卡片）
```
┌─────────────────────────────────┐
│  ┌─────┐  快小红宏    ⋯ 🔴   │  <-- 图标 + 标题 + 三圆点 + 开关
│  │ 📱  │                         │
│  └─────┘                         │
│  从小红书采集内容到飞书          │  <-- 描述（1行截断）
│  多维表格                         │
└─────────────────────────────────┘
```

#### 网格布局（2 列）
```
┌─────────────────┬─────────────────┐
│  ┌─────┐        │  ┌─────┐        │
│  │ 📱  │  快小红 ⋯🔴│  │ ⏰  │  定时提醒 ⋯⚪│
│  └─────┘        │  └─────┘        │
│  小红书→飞书     │  每天8点提醒    │
├─────────────────┼─────────────────┤
│  ┌─────┐        │  ┌─────┐        │
│  │ 📤  │  启动应用 ⋯🔴│  │ 🌐  │  HTTP请求 ⋯🔴│
│  └─────┘        │  └─────┘        │
│  打开微信        │  API调用        │
└─────────────────┴─────────────────┘
```

#### 视觉规范（参考 iPhone 快捷指令）
```typescript
MacroCard {
  背景：BG_PRIMARY
  圆角：16px（与 iPhone 快捷指令一致）
  阴影：0 2px 12px SHADOW_LIGHT
  内边距：12px（更紧凑）

  // 图标容器（方形圆角）
  IconContainer {
    尺寸：52px × 52px
    圆角：12px
    背景：宏自定义颜色（默认 PRIMARY_BLUE）
    图标：32px, 白色
    阴影：0 2px 6px rgba(0,0,0,0.15)

    // 快捷指令风格：图标居中，背景色块
  }

  // 标题行（图标 + 标题 + 三圆点 + 开关）
  TitleRow {
    布局：flex, space-between
    左侧：图标容器 + 标题
    右侧：三圆点按钮 + 开关

    标题：
      - 字体：H3_SIZE (17px), H3_WEIGHT (600)
      - 颜色：TEXT_PRIMARY
      - 左边距：8px

    三圆点按钮：
      - 图标：SF Symbol 'ellipsis.circle.fill'
      - 尺寸：24px
      - 颜色：TEXT_TERTIARY
      - 背景：透明
      - 点击：弹出快捷菜单（编辑/删除/复制/重命名/星标）
      - hover：opacity 0.6

    开关：iOS 风格 Toggle，32px × 20px
      - 开启状态：PRIMARY_BLUE 背景，白色滑块
      - 关闭状态：BG_TERTIARY 背景，白色滑块
  }

  // 描述
  Description {
    字体：BODY_SIZE (15px)
    颜色：TEXT_SECONDARY
    行高：LINE_HEIGHT_TIGHT (1.2)
    最大行数：2（紧凑模式）/ 3（标准模式）
    截断：省略号
  }

  // 触发器标签（快捷指令风格）
  TriggerTags {
    布局：横向排列，间距 6px
    标签样式：
      - 背景：BG_SECONDARY
      - 圆角：6px
      - 内边距：4px 8px
      - 字体：FOOTNOTE_SIZE (11px)
      - 颜色：TEXT_TERTIARY
      - 图标：12px

    常见图标：
      - ⏱️ 定时触发
      - 🔔 通知触发
      - 📱 网络触发
      - 👆 手动触发
  }

  // 时间戳（列表模式可选）
  Timestamp {
    字体：FOOTNOTE_SIZE (11px)
    颜色：TEXT_TERTIARY
    位置：底部，左对齐
    图标：🕐 (12px)
    布局：图标 + 文字，间距 4px
    示例："最后执行：2025-01-11 14:30"
  }
}
```

#### 颜色主题（快捷指令风格）
```typescript
// 宏卡片自定义颜色（背景色 + 图标）
MACRO_COLORS = [
  '#007DFF', // 蓝色（默认）
  '#34C759', // 绿色
  '#FF9500', // 橙色
  '#FF3B30', // 红色
  '#AF52DE', // 紫色
  '#5AC8FA', // 青色
  '#FF2D55', // 粉色
  '#5856D6', // 靛蓝
  '#FFCC00', // 黄色
  '#8E8E93', // 灰色
]
```

#### 点击交互（快捷指令风格）
```typescript
CardInteraction {
  // 点击整个卡片主体
  单击（卡片主体）：
    - 直接执行宏
    - 显示执行中状态（加载动画）
    - 执行成功/失败提示
    - 注意：不包括开关和三圆点按钮区域

  // 点击三圆点按钮
  单击（三圆点按钮 ⋯）：
    - 弹出快捷菜单（编辑、删除、复制、重命名、星标）
    - 阻止冒泡到卡片点击
    - 菜单位置：三圆点按钮下方或右侧
    - 菜单动画：从原点弹出，scale 0.8 → 1

  // 点击开关
  单击（开关 🔴）：
    - 切换启用/禁用状态
    - 阻止冒泡到卡片点击
    - 状态反馈：颜色变化 + 震动

  // 长按（额外功能）
  长按：
    - 触觉反馈（震动）
    - 显示编辑菜单：编辑、删除、复制、重命名、星标
    - 背景色：BG_SECONDARY
    - 注意：长按不会触发执行

  // 滑动（列表模式）
  滑动：
    - 左滑：显示操作菜单（编辑、删除）
    - 距离 > 100px：菜单完全展开
    - 释放：自动恢复或执行操作
    - 注意：仅列表模式支持
}
```

#### 网格布局规范
```typescript
GridLayout {
  列数：2 列（手机）/ 3 列（平板）
  列间距：12px
  行间距：12px
  边距：左右 16px

  Card 尺寸：
    - 最小高度：120px（紧凑模式）
    - 标准高度：160px（标准模式）
    - 宽度：自适应（(屏幕宽度 - 边距 - 间距) / 列数）
}
```

### 5.4 文件夹卡片（新增）

#### 布局
```
┌──────────────────────────────────────────┐
│  📁  工作流自动化                           │
│  3 个宏                                   │
│                                          │
│  [快速预览]  3 个启用 / 0 个禁用           │
└──────────────────────────────────────────┘
```

#### 点击行为
- 单击：展开文件夹，显示该文件夹下的宏列表
- 长按：弹出编辑菜单（重命名、删除、移动）

### 5.5 浮动操作按钮（FAB）

#### 设计
```typescript
FAB {
  位置：右下角，距离边缘 20px
  尺寸：56px
  形状：圆形
  背景：PRIMARY_BLUE
  图标：白色加号 + 24px
  阴影：0 4px 12px SHADOW_MEDIUM
  点击效果：缩小至 0.95，恢复（100ms）
}
```

#### 使用场景
- **我的宏页面**：添加新宏
- **模板页面**：创建新模板（暂不实现）

### 5.6 空状态页面

#### 设计
```
┌──────────────────────────────────────────┐
│                                          │
│            📱 (80px)                     │
│                                          │
│         暂无宏                            │
│     H2_SIZE, TEXT_SECONDARY              │
│                                          │
│  点击右下角 + 号创建你的第一个宏           │
│      CAPTION_SIZE, TEXT_TERTIARY         │
│                                          │
│      [创建宏] (主要按钮)                  │
└──────────────────────────────────────────┘
```

## 六、页面详细设计

### 6.1 我的宏页面（MacrosTab.ets）

#### 页面结构（快捷指令风格网格布局）
```
┌──────────────────────────────────────────┐
│  我 的 宏              [编辑] (可选)      │  <-- 大标题模式导航栏
├──────────────────────────────────────────┤
│                                          │
│  ┌──── 文件夹 ──────────────────────┐   │
│  │ [全部] [工作流] [定时任务] ...   │   │  <-- 水平滚动标签栏
│  └─────────────────────────────────┘   │
│                                          │
│  ┌──────────┬──────────┐                 │
│  │ ┌─────┐  │ ┌─────┐  │                 │
│  │ │ 📱  │  │ │ ⏰  │  │  <-- 网格布局
│  │ └─────┘  │ └─────┘  │     2 列
│  │ 快小红   │ 定时提醒  │
│  │ 小红→飞书 │ 每天8点   │                 │
│  │    🔴   │    ⚪    │                 │
│  ├──────────┼──────────┤                 │
│  │ ┌─────┐  │ ┌─────┐  │                 │
│  │ │ 📤  │  │ │ 🌐  │  │
│  │ └─────┘  │ └─────┘  │
│  │ 启动应用  │ HTTP请求 │
│  │ 打开微信  │ API调用   │                 │
│  │    🔴   │    🔴   │                 │
│  ├──────────┼──────────┤                 │
│  │ ┌─────┐  │ ┌─────┐  │                 │
│  │ │ 📋  │  │ │ 🔔  │  │
│  │ └─────┘  │ └─────┘  │
│  │ 复制文本  │ 发送通知  │
│  │ 剪贴板操作 │ 系统通知  │                 │
│  │    ⚪    │    🔴   │                 │
│  └──────────┴──────────┘                 │
│                                          │
│                                  ┌──┐   │
│                                  │+ │   │  <-- FAB 按钮
│                                  └──┘   │
├──────────────────────────────────────────┤
│  📱  │  📋  │  ⚙️  │                      │  <-- 底部 Tab 导航
└──────────────────────────────────────────┘
     我的宏   模板    设置
```

#### 列表模式（支持切换）
```
┌──────────────────────────────────────────┐
│  我 的 官              [🔲] [🔳]         │  <-- 视图切换按钮
├──────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────┐         │
│  │ ┌─────┐  快小红    ⋯ 🔴   │  <-- 完整卡片（列表模式）
│  │ │ 📱  │                     │     点击整个卡片触发执行
│  │ └─────┘                     │
│  │ 小红书采集到飞书多维表格      │
│  │ ⏱️ 定时 · 🔔 通知            │
│  │ 最后执行：2025-01-11 14:30  │  <-- 时间戳（列表模式）
│  └────────────────────────────┘         │
│                                          │
│  ┌────────────────────────────┐         │
│  │ ┌─────┐  定时提醒    ⋯ ⚪   │
│  │ │ ⏰  │                     │
│  │ └─────┘                     │
│  │ 每天早上 8 点提醒             │
│  │ ⏱️ 定时触发                  │
│  │ 最后执行：2025-01-10 09:15  │
│  └────────────────────────────┘         │
│                                          │
├──────────────────────────────────────────┤
│  📱  │  📋  │  ⚙️  │                      │
└──────────────────────────────────────────┘
```

#### 交互细节（快捷指令风格）
1. **视图切换**
   - 网格模式（默认）：2 列网格，紧凑显示
   - 列表模式：单列，显示完整信息
   - 切换按钮：导航栏右侧的网格/列表图标
   - 记忆用户偏好：保存到本地存储

2. **文件夹筛选**
   - 点击水平标签栏中的文件夹名称，筛选显示该文件夹下的宏
   - 点击"全部"显示所有宏
   - 选中标签：PRIMARY_BLUE 背景，白色文字，圆角 16px
   - 未选中标签：透明背景，TEXT_SECONDARY
   - 动画：标签切换时 150ms 缩放过渡

3. **文件夹展开**
   - 单击文件夹卡片，展开显示该文件夹下的所有宏（列表模式）
   - 展开动画：平滑展开（300ms, ease-out）
   - 展开状态：文件夹卡片背景变为 PRIMARY_BLUE_LIGHT
   - 箭头图标：向右 ▶ → 向下 ▼

4. **编辑模式**
   - 点击导航栏"编辑"按钮，进入编辑模式
   - 所有卡片左上角显示圆形复选框（iOS 风格）
   - 底部显示批量操作栏：删除、移动、启用/禁用
   - 复选框样式：
     - 未选中：空心圆，边框 2px TEXT_TERTIARY
     - 选中：实心圆，背景 PRIMARY_BLUE，白色对勾

5. **卡片拖拽排序**
   - 长按卡片进入拖拽模式
   - 卡片浮起（scale 1.05），阴影加深
   - 其他卡片自动让位（动画过渡 200ms）
   - 释放时自动吸附到最近位置
   - 仅在"全部"文件夹下支持

6. **3D Touch / 深按反馈**
   - 轻按卡片：预览详细信息（弹窗）
   - 继续按住：显示快捷菜单（编辑、删除、复制、分享）
   - 释放：关闭预览或执行操作
   - 触觉反馈：Taptic Engine 震动

#### 状态管理
```typescript
@State currentFolderId: number | null = null;  // 当前选中的文件夹
@State folders: Folder[] = [];                 // 文件夹列表
@State macros: Macro[] = [];                    // 宏列表
@State viewMode: 'grid' | 'list' = 'grid';     // 视图模式
@State isEditMode: boolean = false;            // 是否编辑模式
@State selectedMacros: Set<number> = new Set(); // 选中的宏 ID
@State isDragging: boolean = false;             // 是否拖拽中
@State dragTargetIndex: number = -1;           // 拖拽目标位置
```

### 6.2 模板页面（TemplatesTab.ets）

#### 页面结构
```
┌──────────────────────────────────────────┐
│  模 板                                    │  <-- 标准导航栏
├──────────────────────────────────────────┤
│                                          │
│  🎯 推荐模板                             │
│  ┌────────────────────────────────────┐ │
│  │  快小红 (小红书 → 飞书)             │ │  <-- 特色模板卡片
│  │  ⭐ 4.8 分 | 🔥 2.3k 使用           │ │
│  │  从小红书采集内容并自动上传到       │ │
│  │  飞书多维表格                       │ │
│  │  [立即使用]                         │ │
│  └────────────────────────────────────┘ │
│                                          │
│  📚 常用场景                             │
│  ┌────────────────────────────────────┐ │
│  │  定时提醒                           │ │
│  │  在指定时间发送通知                 │ │
│  │  1.2k 使用 | ⏱️ 定时触发            │ │
│  │  [立即使用]                         │ │
│  └────────────────────────────────────┘ │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  启动应用                           │ │
│  │  快速打开常用应用                   │ │
│  │  856 使用 | 📱 动作                 │ │
│  │  [立即使用]                         │ │
│  └────────────────────────────────────┘ │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  HTTP 请求                         │ │
│  │  发送网络请求并处理响应             │ │
│  │  642 使用 | 🌐 网络动作             │ │
│  │  [立即使用]                         │ │
│  └────────────────────────────────────┘ │
│                                          │
├──────────────────────────────────────────┤
│  📱  │  📋  │  ⚙️  │                      │
└──────────────────────────────────────────┘
```

#### 快小红模板卡片设计
```typescript
FeaturedTemplateCard {
  高度：200px
  背景：渐变色 PRIMARY_BLUE → PRIMARY_BLUE_DARK
  圆角：16px
  阴影：0 4px 16px SHADOW_MEDIUM

  内容：
    - 图标：60px，白色 + 阴影
    - 标题：H1_SIZE, 白色, Bold
    - 评分和使用数：FOOTNOTE_SIZE, 白色 80% 透明度
    - 描述：BODY_SIZE, 白色 90% 透明度
    - 按钮：背景白色, 文字 PRIMARY_BLUE, 高度 40px, 圆角 8px

  点击效果：
    - 缩放至 0.95, 恢复（150ms）
    - 跳转到宏编辑器，预填充模板内容
}
```

#### 普通模板卡片设计
```typescript
TemplateCard {
  背景：BG_PRIMARY
  圆角：12px
  阴影：0 2px 8px SHADOW_LIGHT
  内边距：CARD_PADDING (16px)

  内容：
    - 标题：H3_SIZE, TEXT_PRIMARY, Semibold
    - 标签：小胶囊，背景 BG_TERTIARY, FOOTNOTE_SIZE, TEXT_SECONDARY
    - 描述：CAPTION_SIZE, TEXT_SECONDARY
    - 使用数：FOOTNOTE_SIZE, TEXT_TERTIARY
    - 按钮：边框 1px PRIMARY_BLUE, 文字 PRIMARY_BLUE, 高度 36px

  右上角：图标（32px）
}
```

### 6.3 设置页面（SettingsTab.ets）

#### 页面结构（当前空白，未来扩展）
```
┌──────────────────────────────────────────┐
│  设 置                                    │  <-- 标准导航栏
├──────────────────────────────────────────┤
│                                          │
│            (空状态)                       │
│                                          │
│          ⚙️ (60px)                        │
│                                          │
│        设置功能开发中                     │
│     H3_SIZE, TEXT_SECONDARY              │
│                                          │
│      CAPTION_SIZE, TEXT_TERTIARY         │
│      未来将支持以下功能：                  │
│      • 主题切换（深色模式）                │
│      • 通知设置                           │
│      • 账号管理                           │
│      • 数据备份                           │
│                                          │
├──────────────────────────────────────────┤
│  📱  │  📋  │  ⚙️  │                      │
└──────────────────────────────────────────┘
```

## 七、交互规范

### 7.1 按钮交互

#### 主要按钮
```typescript
PrimaryButton {
  状态：
    - 正常：背景 PRIMARY_BLUE, 文字白色
    - 按压：背景 PRIMARY_BLUE_DARK, 文字白色
    - 禁用：背景 BG_TERTIARY, 文字 TEXT_TERTIARY

  尺寸：
    - 高度：44px（推荐）、36px、32px
    - 宽度：自适应或全宽

  动画：
    - 按压：缩放至 0.95，持续 100ms
    - 释放：恢复至 1.0，持续 100ms

  圆角：8px
  内边距：左右 16px
}
```

#### 次要按钮
```typescript
SecondaryButton {
  状态：
    - 正常：背景透明, 边框 1px PRIMARY_BLUE, 文字 PRIMARY_BLUE
    - 按压：背景 PRIMARY_BLUE_LIGHT, 边框 1px PRIMARY_BLUE, 文字 PRIMARY_BLUE
    - 禁用：背景透明, 边框 1px BG_TERTIARY, 文字 TEXT_TERTIARY

  尺寸和动画同主要按钮
}
```

#### 文本按钮
```typescript
TextButton {
  状态：
    - 正常：背景透明, 文字 PRIMARY_BLUE
    - 按压：背景 PRIMARY_BLUE 10% 透明度, 文字 PRIMARY_BLUE
    - 禁用：背景透明, 文字 TEXT_TERTIARY

  尺寸：高 32px, 宽自适应
  圆角：无
}
```

### 7.2 卡片交互

#### 点击效果
```typescript
Card {
  状态：
    - 正常：背景 BG_PRIMARY, 阴影 SHADOW_LIGHT
    - 按压：背景 BG_SECONDARY, 阴影消失
    - 长按：背景 BG_SECONDARY, 触觉反馈（震动）

  动画：
    - 按压：透明度 1.0 → 0.9，持续 100ms
    - 释放：透明度 0.9 → 1.0，持续 100ms
}
```

#### 滑动删除
- 宏卡片支持左滑删除（iOS 标准交互）
- 滑动距离：> 100px 时显示删除按钮（红色背景）
- 释放时如果滑动距离 > 200px，自动删除

### 7.3 页面过渡

#### 页面切换（Tab 切换）
```typescript
TabTransition {
  方式：淡入淡出（Opacity 变化）
  持续时间：200ms
  曲线：ease-in-out
}
```

#### 页面导航（push）
```typescript
PagePushTransition {
  新页面：从右侧滑入，X 偏移 100% → 0%
  旧页面：向左滑动，X 偏移 0% → -30%
  持续时间：300ms
  曲线：ease-out
}
```

#### 对话框弹出
```typescript
DialogShowTransition {
  背景：黑色 50% 透明度，淡入（200ms）
  内容：从底部滑入，Y 偏移 100% → 0%（250ms）
  曲线：ease-out
}
```

### 7.4 加载状态

#### 页面级加载
```typescript
PageLoading {
  状态：居中显示加载动画
  动画：iOS 风格旋转圆环（SF Symbols `arrow.triangle.2.circlepath`）
  颜色：PRIMARY_BLUE
  大小：32px
  下方文字："加载中..."，CAPTION_SIZE, TEXT_SECONDARY
}
```

#### 列表分页加载
```typescript
ListPaginationLoading {
  位置：列表底部
  内容：加载动画 + "加载更多..."（CAPTION_SIZE, TEXT_TERTIARY）
  高度：60px
}
```

#### 按钮加载状态
```typescript
ButtonLoading {
  状态：
    - 正常：显示文字
    - 加载中：显示加载动画（16px），隐藏文字

  动画：旋转圆环，PRIMARY_BLUE
  禁用交互
}
```

## 八、动画规范

### 8.1 动画时长
```typescript
DURATION_FAST = 100ms    // 快速反馈（按钮点击）
DURATION_NORMAL = 200ms  // 标准过渡（Tab 切换）
DURATION_SLOW = 300ms    // 复杂动画（页面导航）
```

### 8.2 动画曲线
```typescript
EASE_IN_OUT = 'cubic-bezier(0.42, 0, 0.58, 1)'    // 标准过渡
EASE_OUT = 'cubic-bezier(0, 0, 0.58, 1)'         // 进入动画
EASE_IN = 'cubic-bezier(0.42, 0, 1, 1)'          // 离开动画
SPRING = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)' // 弹性动画
```

### 8.3 常用动画场景

#### 卡片展开/收起（快捷指令风格）
```typescript
CardExpandAnimation {
  展开：
    - 高度：折叠高度 → 完整高度（300ms, ease-out）
    - 透明度：描述 0 → 1（250ms, 延迟 50ms）
    - 操作按钮：translateY 20px → 0（250ms, 延迟 100ms）
    - 触发器标签：opacity 0 → 1（250ms, 延迟 100ms）

  收起：
    - 所有元素同步收起（200ms, ease-in）
}
```

#### 开关切换（Toggle）
```typescript
ToggleAnimation {
  背景色：
    - 开启：BG_TERTIARY → PRIMARY_BLUE（150ms, ease-out）
    - 关闭：PRIMARY_BLUE → BG_TERTIARY（150ms, ease-out）

  滑块位置：
    - 开启：0 → 24px（200ms, spring）
    - 关闭：24px → 0（200ms, spring）

  缩放：
    - 点击时：scale 1.0 → 0.9（100ms）
    - 释放时：scale 0.9 → 1.0（100ms）
}
```

#### 卡片删除（快捷指令风格）
```typescript
CardDeleteAnimation {
  阶段 1 - 滑动：
    - X 偏移：0 → -300px（300ms, ease-out）
    - 透明度：1 → 0（同步）

  阶段 2 - 高度收缩：
    - 高度：完整高度 → 0（300ms, ease-in）
    - margin-bottom：12px → 0（同步）
    - 邻接卡片：向上滑动填补空隙（350ms, spring）

  阶段 3 - 移除：
    - 从 DOM 移除（动画完成后）
}
```

#### 视图切换（网格 ↔ 列表）
```typescript
ViewSwitchAnimation {
  网格 → 列表：
    - 所有卡片：scale 0.8 → 1（300ms, spring）
    - 布局：grid → column（300ms）
    - 卡片重新排列（交错动画，每张卡片延迟 50ms）

  列表 → 网格：
    - 所有卡片：scale 0.8 → 1（300ms, spring）
    - 布局：column → grid（300ms）
    - 卡片重新排列（交错动画，每张卡片延迟 50ms）
}
```

#### 拖拽排序
```typescript
DragSortAnimation {
  拖拽中：
    - 目标卡片：scale 1.05, shadow 加深
    - 邻接卡片：自动让位（200ms, ease-out）

  放置：
    - 目标卡片：scale 1.05 → 1（200ms, spring）
    - 所有卡片：重新排列（300ms, spring）
}
```

#### 快捷菜单弹出
```typescript
ContextMenuAnimation {
  背景：
    - 透明度：0 → 0.4（200ms, ease-out）

  菜单：
    - scale：0.8 → 1（250ms, spring）
    - opacity：0 → 1（同步）
    - translateY：20px → 0（同步）
    - 菜单项：交错显示（每项延迟 30ms）
}

  菜单项 hover：
    - 背景：透明 → BG_SECONDARY（150ms）
}

  菜单项点击：
    - scale：1 → 0.95（100ms）
    - 恢复：0.95 → 1（100ms）
}
```

#### 下拉刷新
```typescript
PullRefreshAnimation {
  状态 1 - 拖拽：
    - 箭头旋转：0° → 180°（距离 0 → 阈值）
    - 距离 < 阈值：箭头向下
    - 距离 >= 阈值：箭头向上，变为旋转动画

  状态 2 - 刷新中：
    - 箭头：旋转动画（1秒一圈）
    - 文字："下拉刷新" → "正在刷新"

  状态 3 - 完成：
    - 箭头：消失
    - 文字："刷新成功"
    - 1500ms 后自动收起
}
```

## 九、响应式设计

### 9.1 屏幕适配
```typescript
// iPhone SE (375px)
MIN_WIDTH = 375px

// iPhone 14 Pro Max (430px)
MAX_WIDTH = 430px

// iPad (768px+)
TABLET_WIDTH = 768px
```

### 9.2 平板适配
```typescript
// 宽度 > 768px 时
- 页面最大宽度：600px（居中）
- 左右边距：自动（居中对齐）
- 列表布局：双列网格（grid-template-columns: 1fr 1fr）
```

### 9.3 横屏适配
```typescript
// 横屏模式
- 顶部导航栏：高度 44px（隐藏状态栏）
- 底部 Tab 导航：高度 49px（隐藏安全区域）
- 内容区：自动扩展
```

## 十、图标系统（快捷指令风格）

### 10.1 图标尺寸
```typescript
ICON_SIZE_XS = 12px   // 超小图标（标签内）
ICON_SIZE_SM = 16px   // 小图标（按钮内）
ICON_SIZE_MD = 20px   // 中图标（列表项、触发器标签）
ICON_SIZE_LG = 32px   // 大图标（卡片图标）
ICON_SIZE_XL = 48px   // 超大图标（空状态、特色模板）
ICON_SIZE_XXL = 80px  // 大空状态图标
```

### 10.2 图标源
推荐使用：
1. **SF Symbols**（需转换为图片资源）- 首选，最符合 iOS 风格
2. **Phosphor Icons**（开源，Apple 风格）
3. **Heroicons**（开源，简洁风格）

### 10.3 快捷指令风格图标映射

#### 宏类型图标（卡片图标）
```typescript
MACRO_ICONS = {
  'default': 'app.fill',           // 默认
  'kuaixiaohong': 'book.fill',     // 快小红
  'timing': 'alarm.fill',          // 定时
  'notification': 'bell.fill',      // 通知
  'network': 'wifi.fill',          // 网络
  'clipboard': 'doc.on.clipboard.fill', // 剪贴板
  'http': 'globe.fill',            // HTTP
  'launch': 'app.badge.fill',      // 启动应用
  'text': 'text.alignleft.fill',    // 文本处理
  'dialog': 'bubble.left.fill',     // 对话框
}
```

#### 触发器图标（标签图标）
```typescript
TRIGGER_ICONS = {
  'timing': 'clock.fill',          // ⏱️ 定时
  'network': 'wifi.fill',          // 📱 网络
  'manual': 'hand.tap.fill',        // 👆 手动
  'notification': 'bell.fill',      // 🔔 通知
  'location': 'location.fill',      // 📍 位置
  'bluetooth': 'antenna.radiowaves.left.and.right', // 蓝牙
  'charging': 'bolt.fill',          // 充电
}
```

#### 操作图标（按钮图标）
```typescript
ACTION_ICONS = {
  'edit': 'pencil',                 // ✏️ 编辑
  'delete': 'trash.fill',           // 🗑️ 删除
  'copy': 'doc.on.doc.fill',        // 📋 复制
  'share': 'square.and.arrow.up',   // 分享
  'more': 'ellipsis.circle.fill',   // 更多（三圆点）
  'star': 'star.fill',              // ⭐ 星标
}
```

#### 系统图标（UI 元素）
```typescript
SYSTEM_ICONS = {
  'folder': 'folder.fill',          // 📁 文件夹
  'add': 'plus.circle.fill',        // ➕ 添加
  'check': 'checkmark.circle.fill', // ✅ 选中
  'grid': 'square.grid.2x2.fill',   // 🔲 网格
  'list': 'list.bullet',            // 🔳 列表
  'search': 'magnifyingglass',      // 🔍 搜索
  'sort': 'line.3.horizontal.decrease.circle', // 排序
  'chevron_right': 'chevron.right', // ▶️ 右箭头
  'chevron_down': 'chevron.down',   // ▼ 下箭头
  'star': 'star.fill',              // ⭐ 星标
  'clock': 'clock',                 // 🕐 时间
}
```

### 10.4 快小红模板图标
```
快小红图标（特色模板）：
  - SF Symbol: 'book.fill' + 'doc.fill' 组合
  - 尺寸：60px
  - 颜色：白色
  - 背景：PRIMARY_BLUE 渐变 → PRIMARY_BLUE_DARK
  - 阴影：0 2px 8px rgba(0,0,0,0.2)

宏卡片小图标：
  - SF Symbol: 'book.fill'
  - 尺寸：32px
  - 背景：方形容器 52px × 52px
  - 容器颜色：#007DFF（可自定义）
  - 容器圆角：12px
```

### 10.5 快捷菜单图标（长按弹出）
```
┌─────────────────────┐
│   ✏️ 编辑            │
├─────────────────────┤
│   🗑️ 删除            │
├─────────────────────┤
│   📋 复制            │
├─────────────────────┤
│   📤 分享            │
├─────────────────────┤
│   ✏️ 重命名          │
├─────────────────────┤
│   ⭐ 添加星标         │
└─────────────────────┘
```

**说明：**
- 点击整个卡片触发执行，不需要"触发"菜单项
- 编辑操作通过三圆点按钮或长按触发
- 快捷菜单适用于三圆点按钮点击和卡片长按场景

## 十一、深色模式支持（预留）

### 11.1 色彩映射
```typescript
// 深色模式色彩
DARK_BG_PRIMARY = '#000000'
DARK_BG_SECONDARY = '#1C1C1E'
DARK_BG_TERTIARY = '#2C2C2E'

DARK_TEXT_PRIMARY = '#FFFFFF'
DARK_TEXT_SECONDARY = '#EBEBF5'
DARK_TEXT_TERTIARY = '#8E8E93'

DARK_SHADOW_LIGHT = 'rgba(255, 255, 255, 0.05)'
DARK_SHADOW_MEDIUM = 'rgba(255, 255, 255, 0.1)'
```

### 11.2 切换机制
- 系统主题：跟随系统设置
- 手动切换：设置页面提供深色模式开关
- 过渡动画：背景色平滑过渡（300ms）

## 十二、实现优先级

### Phase 1：核心布局（高优先级）
1. ✅ 底部 Tab 导航栏
2. ✅ 我的宏页面布局
3. ✅ 宏卡片优化
4. ✅ 浮动操作按钮

### Phase 2：文件夹功能（高优先级）
5. ✅ 文件夹卡片组件
6. ✅ 文件夹筛选标签栏
7. ✅ 文件夹展开/收起交互

### Phase 3：模板页面（中优先级）
8. ✅ 模板页面布局
9. ✅ 快小红模板卡片
10. ✅ 普通模板卡片
11. ✅ 模板使用逻辑

### Phase 4：设置页面（低优先级）
12. ⏳ 设置页面空状态
13. ⏳ 基础设置项（预留）

### Phase 5：交互优化（持续）
14. ⏳ 页面过渡动画
15. ⏳ 按钮点击反馈
16. ⏳ 加载状态优化
17. ⏳ 下拉刷新

## 十三、组件命名规范

```typescript
// 页面组件
MacrosTab.ets          // 我的宏页面
TemplatesTab.ets        // 模板页面
SettingsTab.ets         // 设置页面

// 业务组件
MacroCard.ets           // 宏卡片
FolderCard.ets          // 文件夹卡片
FolderFilterBar.ets     // 文件夹筛选标签栏
TemplateCard.ets        // 模板卡片
FeaturedTemplateCard.ets // 特色模板卡片

// 通用组件
MainTabBar.ets          // 主 Tab 导航栏
FABButton.ets           // 浮动操作按钮
EmptyState.ets          // 空状态组件
LoadingSpinner.ets      // 加载动画
```

## 十四、资源文件结构

```
entry/src/main/resources/
├── base/
│   ├── element/
│   │   ├── color.json          // 色彩系统
│   │   ├── float.json          // 尺寸和间距
│   │   └── string.json         // 文字资源
│   ├── media/
│   │   ├── icons/
│   │   │   ├── tab_macros.png  // 我的宏 Tab 图标
│   │   │   ├── tab_templates.png // 模板 Tab 图标
│   │   │   ├── tab_settings.png // 设置 Tab 图标
│   │   │   ├── folder.png      // 文件夹图标
│   │   │   ├── add.png         // 添加图标
│   │   │   ├── macro_default.png // 默认宏图标
│   │   │   ├── macro_timing.png // 定时宏图标
│   │   │   ├── macro_notification.png // 通知宏图标
│   │   │   └── macro_http.png  // HTTP 宏图标
│   │   └── templates/
│   │       └── kuai_xiao_hong.png // 快小红模板图标
│   └── profile/
│       └── main_pages.json      // 页面路由配置
```

## 十五、快捷指令风格特殊组件

### 15.1 批量操作栏（编辑模式）

#### 布局
```
┌──────────────────────────────────────────┐
│  已选择 3 个              [取消]         │  <-- 操作栏标题
├──────────────────────────────────────────┤
│  ┌──────┐  ┌──────┐  ┌──────┐            │
│  │ 🗑️  │  │ 📁  │  │ 🔄   │            │  <-- 操作按钮
│  │ 删除  │  │ 移动  │  │ 启用 │            │
│  └──────┘  └──────┘  └──────┘            │
│                                          │
│  ┌──────┐  ┌──────┐  ┌──────┐            │
│  │ ⏸️  │  │ 📋  │  │ 📤   │            │
│  │ 禁用  │  │ 复制  │  │ 分享 │            │
│  └──────┘  └──────┘  └──────┘            │
└──────────────────────────────────────────┘
```

#### 视觉规范
```typescript
BatchActionBar {
  位置：底部固定（49px + 安全区域）
  背景：BG_SECONDARY + 毛玻璃效果
  阴影：0 -2px 10px SHADOW_MEDIUM
  边框：顶部 0.5px 分隔线

  标题：
    - 字体：BODY_SIZE (15px), TEXT_PRIMARY
    - 位置：左侧，距离 16px
    - 取消按钮：右侧，PRIMARY_BLUE

  操作按钮：
    - 布局：3 列网格
    - 尺寸：70px × 70px
    - 背景：BG_PRIMARY
    - 圆角：12px
    - 阴影：0 2px 6px SHADOW_LIGHT

    图标：32px, PRIMARY_BLUE
    文字：FOOTNOTE_SIZE (11px), TEXT_PRIMARY
    间距：8px
}
```

#### 进入/退出动画
```typescript
BatchActionBarAnimation {
  进入：
    - translateY：100% → 0（300ms, ease-out）
    - opacity：0 → 1（同步）

  退出：
    - translateY：0 → 100%（250ms, ease-in）
    - opacity：1 → 0（同步）
}
```

### 15.2 快捷菜单（三圆点按钮点击/长按弹出）

#### 布局
```
┌─────────────────────────────┐
│                             │
│   ✏️ 编辑                    │  <-- 菜单项
├─────────────────────────────┤
│   🗑️ 删除                    │
├─────────────────────────────┤
│   📋 复制                    │
├─────────────────────────────┤
│   📤 分享                    │
├─────────────────────────────┤
│   ✏️ 重命名                  │
├─────────────────────────────┤
│   ⭐ 添加星标                 │
└─────────────────────────────┘
```

**触发方式：**
1. 点击卡片右上角三圆点按钮 ⋯
2. 长按整个卡片（额外入口）
3. 编辑模式：点击卡片后从底部弹出

#### 视觉规范
```typescript
ContextMenu {
  背景：BG_PRIMARY
  圆角：12px
  阴影：0 8px 24px SHADOW_MEDIUM
  最大宽度：280px

  菜单项：
    - 高度：48px
    - 内边距：左右 16px
    - 图标：24px, TEXT_PRIMARY
    - 文字：BODY_SIZE (15px), TEXT_PRIMARY
    - 布局：flex-start, 居中
    - hover：背景 BG_SECONDARY
    - 分隔线：底部 0.5px BG_TERTIARY（最后一项无）

  危险操作（删除）：
    - 文字：DANGER
    - 图标：DANGER
}
```

#### 定位
```typescript
ContextMenuPosition {
  长按卡片时弹出：
    - 水平：卡片右侧或左侧（根据屏幕空间）
    - 垂直：卡片顶部或底部（优先底部）
    - 间距：8px
    - 确保不超出屏幕边界
}
```

### 15.3 搜索栏（可选功能）

#### 布局
```
┌──────────────────────────────────────┐
│  🔍  搜索宏...              ×       │  <-- 搜索栏
├──────────────────────────────────────┤
```

#### 视觉规范
```typescript
SearchBar {
  高度：36px
  背景：BG_TERTIARY
  圆角：10px
  内边距：左右 12px

  图标：16px, TEXT_TERTIARY
  占位符：BODY_SIZE (15px), TEXT_TERTIARY
  文字：BODY_SIZE (15px), TEXT_PRIMARY
  清除按钮：16px, TEXT_TERTIARY

  焦点状态：
    - 背景：BG_PRIMARY
    - 边框：1px PRIMARY_BLUE

  动画：
    - 焦点获得：scale 1.0 → 1.02（150ms）
    - 焦点失去：scale 1.02 → 1.0（150ms）
}
```

## 十六、开发检查清单（快捷指令风格）

### 页面开发
- [ ] 底部 Tab 导航栏实现
- [ ] 我的宏页面布局完成（网格模式）
- [ ] 我的宏页面布局完成（列表模式）
- [ ] 视图切换功能实现
- [ ] 模板页面布局完成
- [ ] 设置页面布局完成

### 组件开发（快捷指令风格）
- [ ] MacroCard 优化完成（紧凑方形卡片）
- [ ] MacroCard 完整模式完成（带操作按钮）
- [ ] FolderCard 组件完成
- [ ] FolderFilterBar 组件完成
- [ ] TemplateCard 组件完成
- [ ] FeaturedTemplateCard 组件完成
- [ ] FABButton 组件完成
- [ ] EmptyState 组件完成
- [ ] BatchActionBar 组件完成（批量操作栏）
- [ ] ContextMenu 组件完成（快捷菜单）
- [ ] SearchBar 组件完成（搜索栏）

### 图标资源（SF Symbols 风格）
- [ ] Tab 导航图标（我的宏、模板、设置）
- [ ] 宏类型图标（默认、定时、通知、HTTP 等）
- [ ] 触发器图标（定时、网络、手动等）
- [ ] 操作图标（触发、编辑、删除、复制、分享）
- [ ] 快小红模板图标

### 功能实现
- [ ] 文件夹筛选逻辑完成
- [ ] 文件夹展开/收起交互完成
- [ ] 视图切换（网格 ↔ 列表）完成
- [ ] 编辑模式完成
- [ ] 批量操作（删除、移动、启用/禁用）完成
- [ ] 卡片拖拽排序完成
- [ ] 快捷菜单（长按弹出）完成
- [ ] 快小红模板数据完成
- [ ] 模板使用跳转逻辑完成
- [ ] 搜索功能完成（可选）

### 样式优化（快捷指令风格）
- [ ] 色彩系统应用到所有页面
- [ ] 字体层级统一
- [ ] 间距规范应用
- [ ] 圆角统一（卡片 16px，按钮 8px）
- [ ] 阴影效果优化
- [ ] 宏卡片自定义颜色系统完成（10 种预设颜色）
- [ ] 毛玻璃效果应用

### 交互优化（快捷指令风格）
- [ ] 按钮点击反馈（缩放 0.95）
- [ ] 卡片按压效果（透明度 0.9）
- [ ] 卡片展开/收起动画完成
- [ ] 视图切换动画完成
- [ ] 拖拽排序动画完成
- [ ] 快捷菜单弹出动画完成
- [ ] 批量操作栏动画完成
- [ ] 页面过渡动画
- [ ] 加载状态展示
- [ ] 空状态展示

### 数据持久化
- [ ] 用户偏好保存（视图模式、文件夹选择）
- [ ] 宏卡片自定义颜色保存
- [ ] 文件夹数据保存
- [ ] 宏排序保存

### 性能优化
- [ ] 列表虚拟滚动（> 50 个宏时）
- [ ] 图片懒加载
- [ ] 动画性能优化（使用 GPU 加速）

### 测试
- [ ] 单元测试（组件逻辑）
- [ ] 集成测试（页面交互）
- [ ] 性能测试（> 100 个宏时的流畅度）
- [ ] 兼容性测试（不同屏幕尺寸）

## 十七、快捷指令风格设计细节补充

### 17.1 卡片布局对比

#### iPhone 快捷指令参考
```
┌─────────────────────────────────┐
│  ┌─────┐                        │
│  │ 🎨  │  调节亮度              │
│  └─────┘                        │
│  将屏幕亮度调至 50%             │
└─────────────────────────────────┘
```

#### 我们的宏卡片设计（快捷指令风格）
```
┌─────────────────────────────────┐
│  ┌─────┐  快小红宏    ⋯ 🔴   │  <-- 添加三圆点 + 开关
│  │ 📱  │                         │
│  └─────┘                         │
│  从小红书采集内容到飞书          │  <-- 描述
│  多维表格                         │
│  ⏱️ 定时 · 🔔 通知                │  <-- 触发器标签
└─────────────────────────────────┘
```

**交互对比：**
- iPhone 快捷指令：点击卡片 → 编辑详情 → 点击运行按钮
- 鸿蒙宏：点击卡片 → 直接执行（更快捷）

### 17.2 设计差异说明

| 特性 | iPhone 快捷指令 | 鸿蒙宏 | 说明 |
|------|----------------|--------|------|
| 卡片形状 | 方形圆角 | 方形圆角 | 一致 |
| 图标容器 | 圆形（SF Symbols） | 方形圆角 | 我们使用方形更符合鸿蒙风格 |
| 颜色自定义 | 支持 | 支持 | 10 种预设颜色 |
| 开关显示 | 无 | 有 | 我们添加开关方便快速启用/禁用 |
| 触发器标签 | 无 | 有 | 我们添加触发器标签展示触发方式 |
| 三圆点按钮 | 无 | 有 | 我们添加三圆点按钮快捷进入编辑 |
| 点击卡片 | 进入编辑详情 | 直接执行宏 | 我们优化为一键执行 |
| 编辑模式 | 长按卡片 | 三圆点 + 长按 | 双重方式 |
| 拖拽排序 | 支持 | 支持 | 一致 |
| 3D Touch | 支持 | 支持（深按） | 一致 |
| 分享功能 | 支持 | 计划支持 | 未来版本 |

### 17.3 设计取舍说明

**保留的快捷指令特性：**
1. ✅ 方形圆角卡片设计
2. ✅ 2 列网格布局
3. ✅ 自定义颜色系统
4. ✅ 拖拽排序
5. ✅ 长按弹出快捷菜单
6. ✅ 3D Touch / 深按预览
7. ✅ 紧凑的视觉风格

**新增/改进的特性：**
1. ➕ 一键执行（点击整个卡片直接执行宏，快捷指令需要进入详情页）
2. ➕ 启用/禁用开关（快捷指令需要进入详情页才能停用）
3. ➕ 触发器标签展示（快速了解宏的触发方式）
4. ➕ 三圆点按钮（快捷进入编辑菜单）
5. ➕ 批量编辑模式（多选操作）
6. ➕ 视图切换（网格/列表）
7. ➕ 文件夹分类（快捷指令使用文件夹，但不够直观）
8. ➕ 搜索功能（快捷指令使用系统搜索）

**设计理由：**
- 一键执行是核心优化，让用户无需进入详情页即可快速触发宏
- 添加开关和标签，用户可以在不进入详情页的情况下快速了解宏的状态
- 三圆点按钮提供快捷编辑入口，比长按更直观
- 批量操作提高管理效率，特别是宏数量较多时
- 视图切换满足不同用户偏好

### 17.4 未来迭代方向

#### v1.1 版本
- [ ] 3D Touch / 深按预览功能
- [ ] 快捷菜单完善（重命名、分享）
- [ ] 搜索功能优化

#### v1.2 版本
- [ ] 自定义图标上传
- [ ] 自定义颜色（超过 10 种预设）
- [ ] 智能文件夹（按触发器类型自动分组）

#### v2.0 版本
- [ ] 宏市场（分享和下载其他用户创建的宏）
- [ ] 宏协作（多人协作编辑）
- [ ] 宏模板引擎（更灵活的模板系统）

## 十六、参考资源

### 设计规范
- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [HarmonyOS Design](https://developer.huawei.com/consumer/cn/design/)

### 图标资源
- [SF Symbols](https://developer.apple.com/sf-symbols/)
- [Phosphor Icons](https://phosphoricons.com/)
- [Heroicons](https://heroicons.com/)

### 设计工具
- [Figma](https://www.figma.com/) - 推荐使用 Apple Design System 模板

---

**文档版本**：v1.2
**创建日期**：2025-01-11
**更新日期**：2025-01-11
**设计师**：OpenCode AI
**适用平台**：HarmonyOS NEXT API 12+
**设计风格**：Apple APP + iPhone 快捷指令
**更新内容**：宏卡片优化 - 右上角三圆点按钮编辑，点击卡片直接执行
